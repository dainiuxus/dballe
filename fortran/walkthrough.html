
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>A walk through the Fortran API &#8212; dballe 3.23 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Transactional behaviour" href="transactions.html" />
    <link rel="prev" title="Fortran API concepts" href="concepts.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="a-walk-through-the-fortran-api">
<h1>A walk through the Fortran API<a class="headerlink" href="#a-walk-through-the-fortran-api" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="including-the-db-all-e-interface-file">
<h2>Including the DB-All.e interface file<a class="headerlink" href="#including-the-db-all-e-interface-file" title="Permalink to this headline">¶</a></h2>
<p>If you work using Fortran 90, DB-All.e comes with an interface file that you
can use to enable type checking on all the DB-All.e API.</p>
<p>To make use of the interface file, just include it at the beginning of your
program:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">include</span> <span class="s2">&quot;dballe/dballeff.h&quot;</span>
</pre></div>
</div>
<p>The Fortran 90 interface also allows to replace all the functions
<a class="reference internal" href="reference.html#c.idba_enqi" title="idba_enqi"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_enqi()</span></code></a>, <a class="reference internal" href="reference.html#c.idba_enqr" title="idba_enqr"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_enqr()</span></code></a>, <a class="reference internal" href="reference.html#c.idba_enqd" title="idba_enqd"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_enqd()</span></code></a> and
<a class="reference internal" href="reference.html#c.idba_enqc" title="idba_enqc"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_enqc()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">idba_enq</span></code> and to replace all the functions
<a class="reference internal" href="reference.html#c.idba_seti" title="idba_seti"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_seti()</span></code></a>, <a class="reference internal" href="reference.html#c.idba_setr" title="idba_setr"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_setr()</span></code></a>, <a class="reference internal" href="reference.html#c.idba_setd" title="idba_setd"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_setd()</span></code></a> and
<a class="reference internal" href="reference.html#c.idba_setc" title="idba_setc"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_setc()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">idba_set</span></code>.</p>
</div>
<div class="section" id="error-management">
<h2>Error management<a class="headerlink" href="#error-management" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>All errors are reported as function return values</li>
<li>All results are reported as output parameters</li>
<li>All functions <code class="docutils literal notranslate"><span class="pre">idba_set*</span></code> set the input of action routines</li>
<li>All functions <code class="docutils literal notranslate"><span class="pre">idba_enq*</span></code> get the output of action routines</li>
</ul>
<p>Errors can be handled by checking the return value of every function:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! Example error handling</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_connect</span><span class="p">(</span><span class="n">dbhandle</span><span class="p">,</span> <span class="s2">&quot;dburl&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="p">(</span><span class="n">ierr</span><span class="p">.</span><span class="n">ne</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span> <span class="k">then</span>
     <span class="c">! handle the error...</span>
<span class="k">end if</span>
</pre></div>
</div>
<p>Or they can be handled by installing a callback function that is automatically
called in case of error:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">!     How to set a callback</span>
<span class="c">!       * the first parameter is the error code that triggers the callback (0</span>
<span class="c">!         means &#39;trigger on all errors&#39;)</span>
<span class="c">!       * the second parameter is the routine to call when the error happens</span>
<span class="c">!         (remember to declare the function as &#39;external&#39;</span>
<span class="c">!       * the third parameter is a convenience arbitrary integer that will be</span>
<span class="c">!         passed to the function</span>
<span class="c">!       * the fourth parameter is used to return a handle that can be used to</span>
<span class="c">!         remove the callback</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_error_set_callback</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">error_handler</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="n">cb_handle</span><span class="p">)</span>
</pre></div>
</div>
<p>The previous code will setup DB-ALLe to call <code class="docutils literal notranslate"><span class="pre">error_handler</span></code> after any error,
passing it the integer value 42.  The callback can be removed at any time by
calling <a class="reference internal" href="reference.html#c.idba_error_remove_callback" title="idba_error_remove_callback"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_error_remove_callback()</span></code></a>:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! How to remove a callback</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_error_remove_callback</span><span class="p">(</span><span class="n">cb_handle</span><span class="p">)</span>
</pre></div>
</div>
<p>This is an example of a useful error handling function:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! The error handler needs to be declared &#39;external&#39;</span>
<span class="k">external </span><span class="n">error_handler</span>

<span class="c">! Compute the length of a string</span>
<span class="c">! (this is an utility function that is used by the error handler</span>
<span class="c">!  to print nicer error messages)</span>
<span class="kt">integer </span><span class="k">function </span><span class="n">istrlen</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
<span class="kt">character </span><span class="n">string</span><span class="o">*</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
  <span class="n">istrlen</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
  <span class="k">do while</span> <span class="p">((</span><span class="n">string</span><span class="p">(</span><span class="n">istrlen</span><span class="p">:</span><span class="n">istrlen</span><span class="p">).</span><span class="n">eq</span><span class="p">.</span><span class="s2">&quot; &quot;</span> <span class="p">.</span><span class="nb">or</span><span class="p">.</span> <span class="n">string</span><span class="p">(</span><span class="n">istrlen</span><span class="p">:</span><span class="n">istrlen</span><span class="p">).</span><span class="n">eq</span><span class="p">.</span><span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nb">and</span><span class="p">.</span> <span class="n">istrlen</span><span class="p">.</span><span class="n">gt</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>
     <span class="n">istrlen</span> <span class="o">=</span> <span class="n">istrlen</span> <span class="o">-</span> <span class="mi">1</span>
  <span class="n">enddo</span>
  <span class="k">return</span>
<span class="k">end</span>

<span class="c">! Generic error handler: print all available information</span>
<span class="c">! about the error, then exit</span>
<span class="k">subroutine </span><span class="n">error_handler</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<span class="kt">integer </span><span class="n">val</span>
<span class="kt">character </span><span class="n">buf</span><span class="o">*</span><span class="mi">1000</span>
  <span class="k">print</span> <span class="o">*</span><span class="p">,</span><span class="n">ier</span><span class="p">,</span><span class="s2">&quot; testcb in &quot;</span><span class="p">,</span><span class="n">val</span>
  <span class="k">call </span><span class="n">idba_error_message</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>
  <span class="k">print</span> <span class="o">*</span><span class="p">,</span><span class="n">buf</span><span class="p">(:</span><span class="n">istrlen</span><span class="p">(</span><span class="n">buf</span><span class="p">))</span>
  <span class="k">call </span><span class="n">idba_error_context</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>
  <span class="k">print</span> <span class="o">*</span><span class="p">,</span><span class="n">buf</span><span class="p">(:</span><span class="n">istrlen</span><span class="p">(</span><span class="n">buf</span><span class="p">))</span>
  <span class="k">call </span><span class="n">idba_error_details</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>
  <span class="k">print</span> <span class="o">*</span><span class="p">,</span><span class="n">buf</span><span class="p">(:</span><span class="n">istrlen</span><span class="p">(</span><span class="n">buf</span><span class="p">))</span>
  <span class="k">call exit</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="k">return</span>
<span class="k">end</span>
</pre></div>
</div>
<p>This code introduces three new functions:</p>
<ul class="simple">
<li><a class="reference internal" href="reference.html#c.idba_error_message" title="idba_error_message"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_error_message()</span></code></a>:
returns a string describing what type of error has happened.</li>
<li><a class="reference internal" href="reference.html#c.idba_error_context" title="idba_error_context"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_error_context()</span></code></a>:
returns a string describing what DB-All.e was trying to do when the error
happened.</li>
<li><a class="reference internal" href="reference.html#c.idba_error_details" title="idba_error_details"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_error_details()</span></code></a>:
returns a detailed description of the error, when available.  If no detailed
description is available, it returns an empty string.</li>
</ul>
<p>A similar error handling behaviour can be obtained by using the predefined
convenience function <a class="reference internal" href="reference.html#c.idba_default_error_handler" title="idba_default_error_handler"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_default_error_handler()</span></code></a>:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! Declare the external function (not necessary if you include dballeff.h)</span>
<span class="k">external </span><span class="n">idba_default_error_handler</span>

<span class="c">! Use it as the error handling callback</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_error_set_callback</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">idba_default_error_handler</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cb_handle</span><span class="p">)</span>
</pre></div>
</div>
<p>An alternative error handler called <a class="reference internal" href="reference.html#c.idba_error_handle_tolerating_overflows" title="idba_error_handle_tolerating_overflows"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_error_handle_tolerating_overflows()</span></code></a>
is available: it exists on all errors instead of value overflows, in what case
it prints a warning to standard error and allows the program to continue.  The
overflow error can then be catched, if needed, by inspecting the error code
returned by the DB-All.e function that causes the error.</p>
<p>This is how to use it:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! Declare the external function (not necessary if you include dballeff.h)</span>
<span class="k">external </span><span class="n">idba_error_handler_tolerating_overflows</span>

<span class="c">! Use it as the error handling callback</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_error_set_callback</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">idba_error_handler_tolerating_overflows</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cb_handle</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="starting-the-work">
<span id="id1"></span><h2>Starting the work<a class="headerlink" href="#starting-the-work" title="Permalink to this headline">¶</a></h2>
<p>Before any action routine, you need to connect to the database.  Connecting to
the database will give you a <em>handle</em> that you can use to open sessions.</p>
<p>This code will open a connection with DB-All.e, then it will start a session:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! Connect to the database and get a handle to work with it</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_connect</span><span class="p">(</span><span class="n">dbhandle</span><span class="p">,</span> <span class="s2">&quot;url&quot;</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_begin</span><span class="p">(</span><span class="n">dbhandle</span><span class="p">,</span> <span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span><span class="p">)</span>

<span class="c">! ...do your work...</span>

<span class="c">! End of the work</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_commit</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_disconnect</span><span class="p">(</span><span class="n">dbhandle</span><span class="p">)</span>
</pre></div>
</div>
<p>You call <a class="reference internal" href="reference.html#c.idba_connect" title="idba_connect"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_connect()</span></code></a> to connect to the databse. The parameters are
the database connection URL (see <a class="reference internal" href="../connect.html#connect"><span class="std std-ref">Connecting to DB-All.e</span></a>), and two parameters that were
used in the past and are now ignored.</p>
<p>You can call <a class="reference internal" href="reference.html#c.idba_begin" title="idba_begin"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_begin()</span></code></a> many times and get more handles.  This allows
to perform many operations on the database at the same time.</p>
<p><a class="reference internal" href="reference.html#c.idba_begin" title="idba_begin"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_begin()</span></code></a> has three extra parameters that can be used to limit
write operations on the database, as a limited protection against programming
errors.</p>
<p>The first extra parameter controls access to station values and can have
these values:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&quot;read&quot;</span></code>: station values cannot be modified.</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;write&quot;</span></code>: station values can be added and removed.</li>
</ul>
<p>The second extra parameter control access to observed data and can have
these values:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&quot;read&quot;</span></code>: data cannot be modified in any way.</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;add&quot;</span></code>: data can be added to the database, but existing data cannot be
modified.  Deletions are disabled.  This is used to insert new data in the
database while preserving the data that was already present in it.</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;write&quot;</span></code>: data can freely be added, overwritten and deleted.</li>
</ul>
<p>The third extra parameter controls access to data attributes and can have
these values:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&quot;read&quot;</span></code>: attributes cannot be modified in any way.</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;write&quot;</span></code>: attributes can freely be added, overwritten and deleted.</li>
</ul>
<p>Note that some combinations are illegal. For example, you cannot have “read” on
station values and “add” on data, because  when adding a new data, it is
sometimes necessary to insert new station records). You also cannot have
“rewrite” on data and “read` on attributes, because when deleting data, their
attributes are deleted as well.</p>
<div class="section" id="starting-the-work-on-a-message">
<h3>Starting the work on a message<a class="headerlink" href="#starting-the-work-on-a-message" title="Permalink to this headline">¶</a></h3>
<p>Instead of connecting to a database, you can use the DB-All.e API to read and
write message reports in BUFR and CREX format.</p>
<p>To do that, use <a class="reference internal" href="reference.html#c.idba_begin_messages" title="idba_begin_messages"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_begin_messages()</span></code></a> instead of both <a class="reference internal" href="reference.html#c.idba_connect" title="idba_connect"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_connect()</span></code></a> and
<a class="reference internal" href="reference.html#c.idba_begin" title="idba_begin"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_begin()</span></code></a>.  To write a message, your code will look like:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! Connect to the database and get a handle to work with it</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_begin_messages</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;file.bufr&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="s2">&quot;auto&quot;</span><span class="p">)</span>

<span class="c">! ...do your work...</span>

<span class="c">! End of the work</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_commit</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="reference.html#c.idba_begin_messages" title="idba_begin_messages"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_begin_messages()</span></code></a> has three parameters:</p>
<ol class="arabic simple">
<li>the name of the file to open</li>
<li>the open mode (<code class="docutils literal notranslate"><span class="pre">&quot;r&quot;</span></code> for read, <code class="docutils literal notranslate"><span class="pre">&quot;w&quot;</span></code> for write or create, <code class="docutils literal notranslate"><span class="pre">&quot;a&quot;</span></code> for append).
See the documentation of libc’s <code class="docutils literal notranslate"><span class="pre">fopen</span></code> for more details.</li>
<li>the file format.  It can be <code class="docutils literal notranslate"><span class="pre">&quot;BUFR&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;CREX&quot;`,</span> <span class="pre">or</span> <span class="pre">``&quot;AUTO&quot;</span></code>.  <code class="docutils literal notranslate"><span class="pre">&quot;AUTO&quot;</span></code> tells
DB-All.e to autodetect the file format, but it only works when reading
files, not when writing new one.</li>
</ol>
<p>You can call <a class="reference internal" href="reference.html#c.idba_begin_messages" title="idba_begin_messages"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_begin_messages()</span></code></a> many times and read or write many files.  You
can even call <a class="reference internal" href="reference.html#c.idba_begin_messages" title="idba_begin_messages"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_begin_messages()</span></code></a> many time on the same file as long as you
open it read only.</p>
<p>Once you open a file, you can use the other DB-All.e functions on it.  There
are slight differences between working on a database and working on a file, and
they are explained later in the section <a class="reference internal" href="#working-with-files"><span class="std std-ref">Working with files</span></a>.</p>
</div>
</div>
<div class="section" id="setting-input-and-reading-output">
<h2>Setting input and reading output<a class="headerlink" href="#setting-input-and-reading-output" title="Permalink to this headline">¶</a></h2>
<p>Input to action routines is done using the functions <code class="docutils literal notranslate"><span class="pre">idba_set*</span></code>, and output
is read with the functions <code class="docutils literal notranslate"><span class="pre">idba_enq*</span></code> (see <a class="reference internal" href="concepts.html#routines"><span class="std std-ref">Input, output, actions</span></a>):</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! Set the extremes of an area and retrieve all the stations in it</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setd</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;latmin&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="mf">0.D0</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setd</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;latmax&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="mf">0.D0</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setd</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;lonmin&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="mf">0.D0</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setd</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;lonmax&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="mf">0.D0</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_query_stations</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="nb">count</span><span class="p">)</span>

<span class="c">! Get the informations about a station</span>
<span class="k">do while</span> <span class="p">(</span><span class="nb">count</span><span class="p">.</span><span class="n">gt</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_next_station</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_enqc</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">cname</span><span class="p">)</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_enqi</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;ana_id&quot;</span><span class="p">,</span> <span class="n">id</span><span class="p">)</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_enqd</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;lat&quot;</span><span class="p">,</span> <span class="n">lat</span><span class="p">)</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_enqd</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;lon&quot;</span><span class="p">,</span> <span class="n">lon</span><span class="p">)</span>
  <span class="c">! ....</span>
  <span class="nb">count</span> <span class="o">=</span> <span class="nb">count</span> <span class="o">-</span> <span class="mi">1</span>
<span class="n">enddo</span>
</pre></div>
</div>
<p>Note that, when one uses <a class="reference internal" href="reference.html#c.idba_setc" title="idba_setc"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_setc()</span></code></a>, <a class="reference internal" href="reference.html#c.idba_seti" title="idba_seti"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_seti()</span></code></a>, <a class="reference internal" href="reference.html#c.idba_enqc" title="idba_enqc"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_enqc()</span></code></a>,
<a class="reference internal" href="reference.html#c.idba_enqi" title="idba_enqi"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_enqi()</span></code></a> with parameters that have some decimal digits, DB-All.e will
work with values as if they did not have a decimal point.  That is, if latitude
<cite>10.124323</cite> is read with <a class="reference internal" href="reference.html#c.idba_enqi" title="idba_enqi"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_enqi()</span></code></a>, then the result will be <cite>10124323</cite>.</p>
<p>The following example shows what happens:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! Set the latitude to 30.0 degrees</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setr</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;lat&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="mf">0.0</span><span class="p">)</span>
<span class="c">! Set the latitude to 30.0 degrees</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setd</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;lat&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="mf">0.0D0</span><span class="p">)</span>

<span class="c">! Set the latitude to 0.00030 degrees</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;lat&quot;</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="c">! Set !the latitude to 30.0 degrees</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;lat&quot;</span><span class="p">,</span> <span class="mi">3000000</span><span class="p">)</span>

<span class="c">! Set the latitude to 0.00030 degrees</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setc</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;lat&quot;</span><span class="p">,</span> <span class="s2">&quot;30&quot;</span><span class="p">)</span>
<span class="c">! Set the latitude to 30.0 degrees</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setc</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;lat&quot;</span><span class="p">,</span> <span class="s2">&quot;3000000&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="input-output-shortcuts">
<h2>Input/output shortcuts<a class="headerlink" href="#input-output-shortcuts" title="Permalink to this headline">¶</a></h2>
<p>There are a few functions that are shortcuts to other input and output
functions:</p>
<p><a class="reference internal" href="reference.html#c.idba_enqdate" title="idba_enqdate"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_enqdate()</span></code></a> is a shortcut to:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">idba_enqi</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="n">year</span><span class="p">)</span>
<span class="n">idba_enqi</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;month&quot;</span><span class="p">,</span> <span class="n">month</span><span class="p">)</span>
<span class="n">idba_enqi</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;day&quot;</span><span class="p">,</span> <span class="n">day</span><span class="p">)</span>
<span class="n">idba_enqi</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;hour&quot;</span><span class="p">,</span> <span class="n">hour</span><span class="p">)</span>
<span class="n">idba_enqi</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="n">minute</span><span class="p">)</span>
<span class="n">idba_enqi</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;sec&quot;</span><span class="p">,</span> <span class="nb">second</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="reference.html#c.idba_setdate" title="idba_setdate"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_setdate()</span></code></a> is a shortcut to:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="n">year</span><span class="p">)</span>
<span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;month&quot;</span><span class="p">,</span> <span class="n">month</span><span class="p">)</span>
<span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;day&quot;</span><span class="p">,</span> <span class="n">day</span><span class="p">)</span>
<span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;hour&quot;</span><span class="p">,</span> <span class="n">hour</span><span class="p">)</span>
<span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">,</span> <span class="n">minute</span><span class="p">)</span>
<span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;sec&quot;</span><span class="p">,</span> <span class="nb">second</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="reference.html#c.idba_enqlevel" title="idba_enqlevel"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_enqlevel()</span></code></a> is a shortcut to:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">idba_enqi</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;leveltype1&quot;</span><span class="p">,</span> <span class="n">type1</span><span class="p">)</span>
<span class="n">idba_enqi</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;l1&quot;</span><span class="p">,</span> <span class="n">l1</span><span class="p">)</span>
<span class="n">idba_enqi</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;leveltype2&quot;</span><span class="p">,</span> <span class="n">type2</span><span class="p">)</span>
<span class="n">idba_enqi</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;l2&quot;</span><span class="p">,</span> <span class="n">l2</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="reference.html#c.idba_setlevel" title="idba_setlevel"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_setlevel()</span></code></a> is a shortcut to:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;leveltype1&quot;</span><span class="p">,</span> <span class="n">type1</span><span class="p">)</span>
<span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;l1&quot;</span><span class="p">,</span> <span class="n">l1</span><span class="p">)</span>
<span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;leveltype2&quot;</span><span class="p">,</span> <span class="n">type2</span><span class="p">)</span>
<span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;l2&quot;</span><span class="p">,</span> <span class="n">l2</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="reference.html#c.idba_enqtimerange" title="idba_enqtimerange"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_enqtimerange()</span></code></a> is a shortcut to:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">idba_enqi</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;pindicator&quot;</span><span class="p">,</span> <span class="k">type</span><span class="p">)</span>
<span class="n">idba_enqi</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;p1&quot;</span><span class="p">,</span> <span class="n">p1</span><span class="p">)</span>
<span class="n">idba_enqi</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;p2&quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="reference.html#c.idba_settimerange" title="idba_settimerange"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_settimerange()</span></code></a> is a shortcut to:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;pindicator&quot;</span><span class="p">,</span> <span class="k">type</span><span class="p">)</span>
<span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;p1&quot;</span><span class="p">,</span> <span class="n">p1</span><span class="p">)</span>
<span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;p2&quot;</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="parameter-names">
<h2>Parameter names<a class="headerlink" href="#parameter-names" title="Permalink to this headline">¶</a></h2>
<p>There are three different kinds of parameter names one can use:</p>
<ul class="simple">
<li>DB-All.e parameters (see <a class="reference internal" href="../parms.html#parms"><span class="std std-ref">Input/output/query parameters</span></a>), that have a special meaning to
DB-All.e: for example they can be part of the coordinate system, or
space/time extremes to use to query the database.  They are indicated simply
with their name (for example, <cite>“lat”</cite> or <cite>“yearmin”</cite>).</li>
<li><a class="reference internal" href="../btable.html#btable"><span class="std std-ref">Local B table codes</span></a>, represent all possible sorts of
observed data, and are indicated in the form <cite>Bxxyyy</cite>, where <cite>xxyyy</cite> are the
X and Y values from the WMO table B.</li>
<li><a class="reference internal" href="../aliases.html#aliases"><span class="std std-ref">Varcode aliases</span></a> that are short, easy to remember names which
can be used instead of frequently used WMO B variables.</li>
</ul>
</div>
<div class="section" id="queries-and-observed-data">
<h2>Queries and observed data<a class="headerlink" href="#queries-and-observed-data" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">idba_set*</span></code> and <code class="docutils literal notranslate"><span class="pre">idba_enq*</span></code> functions can also be used to set and get
observation data.  To do so, use as parameter the string <code class="docutils literal notranslate"><span class="pre">&quot;Bxxyyy&quot;</span></code>, where
<code class="docutils literal notranslate"><span class="pre">xx</span></code> and <code class="docutils literal notranslate"><span class="pre">yyy</span></code> are the X and Y values of the BUFR/CREX table B describing
the observed data.</p>
<p>For example:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! Set the speed of the wind (very useful in summer)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setr</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;B11002&quot;</span><span class="p">,</span> <span class="mf">1.8</span><span class="p">)</span>
<span class="c">! Also set the temperature</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setr</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;B12001&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="mf">1.8</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_insert_data</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="attributes">
<h2>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">idba_set*</span></code> and <code class="docutils literal notranslate"><span class="pre">idba_enq</span></code> groups of functions can also be used to
set and get attributes on data.  To do so, use as parameter the string
<code class="docutils literal notranslate"><span class="pre">&quot;*Bxxyyy&quot;</span></code>, where <code class="docutils literal notranslate"><span class="pre">xx</span></code> and <code class="docutils literal notranslate"><span class="pre">yyy</span></code> are the X and Y values of the
BUFR/CREX table B describing the attribute.</p>
<p>For example:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! Set the confidence of the wind speed value we inserted</span>
<span class="c">! in the last &#39;idba_insert_data&#39;</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setr</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;*B33007&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="mf">5.0</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setc</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;*var_related&quot;</span><span class="p">,</span> <span class="s2">&quot;B11002&quot;</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_insert_attributes</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="querying-the-database">
<span id="querying"></span><h2>Querying the database<a class="headerlink" href="#querying-the-database" title="Permalink to this headline">¶</a></h2>
<p>Queries are made by giving one or more extremes of space, time, level or time
range.  See <a class="reference internal" href="../parms.html#parms-query"><span class="std std-ref">Parameters used when setting up a query</span></a> for a list of all available query parameters.</p>
<div class="section" id="querying-the-station-values">
<h3>Querying the station values<a class="headerlink" href="#querying-the-station-values" title="Permalink to this headline">¶</a></h3>
<p>Example code to query all the stations in a given area:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setd</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;latmin&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="mf">0.D0</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setd</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;latmax&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="mf">0.D0</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setd</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;lonmin&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="mf">0.D0</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setd</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;lonmax&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="mf">0.D0</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_query_stations</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="nb">count</span><span class="p">)</span>
<span class="k">do while</span> <span class="p">(</span><span class="nb">count</span><span class="p">.</span><span class="n">gt</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_next_station</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_enqi</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;ana_id&quot;</span><span class="p">,</span> <span class="n">id</span><span class="p">)</span>
  <span class="c">! Pseudoana values can be read as well:</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_enqc</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">cname</span><span class="p">)</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_enqd</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;B07001&quot;</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
  <span class="c">! ...query more data and work with it...</span>
  <span class="nb">count</span> <span class="o">=</span> <span class="nb">count</span> <span class="o">-</span> <span class="mi">1</span>
<span class="n">enddo</span>
</pre></div>
</div>
<p>This code introduces two new functions:</p>
<ul class="simple">
<li><a class="reference internal" href="reference.html#c.idba_query_stations" title="idba_query_stations"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_query_stations()</span></code></a>: performs the query and returns the number of stations it
finds.</li>
<li><a class="reference internal" href="reference.html#c.idba_next_station" title="idba_next_station"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_next_station()</span></code></a>: gets a station out of the results of <a class="reference internal" href="reference.html#c.idba_query_stations" title="idba_query_stations"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_query_stations()</span></code></a>.
If there are no more stations, the function fails.</li>
</ul>
<p>After <a class="reference internal" href="reference.html#c.idba_next_station" title="idba_next_station"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_next_station()</span></code></a>, the output record will also contain all the pseudoana
values available for the station.  If <cite>rep_cod</cite> or <cite>rep_memo</cite> are specified as
query parameters, the pseudoana values of that network will be used.  Else,
<a class="reference internal" href="reference.html#c.idba_next_station" title="idba_next_station"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_next_station()</span></code></a> will use all available pseudoana values, choosing the one in
the network with the highest priority in case the same pseudoana value is
available on more than one network.</p>
</div>
<div class="section" id="querying-the-measured-values">
<h3>Querying the measured values<a class="headerlink" href="#querying-the-measured-values" title="Permalink to this headline">¶</a></h3>
<p>Example code to query all the values in a given area and time:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;latmin&quot;</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;latmax&quot;</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;lonmin&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;lonmax&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;yearmin&quot;</span><span class="p">,</span> <span class="mi">2004</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;yearmax&quot;</span><span class="p">,</span> <span class="mi">2004</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_query_data</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="nb">count</span><span class="p">)</span>
<span class="k">do while</span> <span class="p">(</span><span class="nb">count</span><span class="p">.</span><span class="n">gt</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_next_data</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">param</span><span class="p">)</span>
  <span class="c">! get the value of this variable</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_enqc</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">cvalue</span><span class="p">)</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_enqd</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;lat&quot;</span><span class="p">,</span> <span class="n">dlat</span><span class="p">)</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_enqd</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;lon&quot;</span><span class="p">,</span> <span class="n">dlon</span><span class="p">)</span>
  <span class="c">! query more data and work with it</span>
  <span class="nb">count</span> <span class="o">=</span> <span class="nb">count</span> <span class="o">-</span> <span class="mi">1</span>
<span class="n">enddo</span>
</pre></div>
</div>
<p>This code introduces two new functions:</p>
<ul class="simple">
<li><a class="reference internal" href="reference.html#c.idba_query_data" title="idba_query_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_query_data()</span></code></a>: performs the query and returns the number of values it
finds.</li>
<li><a class="reference internal" href="reference.html#c.idba_next_data" title="idba_next_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_next_data()</span></code></a>: gets a value out of the result of <a class="reference internal" href="reference.html#c.idba_query_data" title="idba_query_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_query_data()</span></code></a>.  If
there are no more stations, the function fails.</li>
</ul>
</div>
</div>
<div class="section" id="clearing-the-database">
<h2>Clearing the database<a class="headerlink" href="#clearing-the-database" title="Permalink to this headline">¶</a></h2>
<p>You can initialise or reinitialise the database using <a class="reference internal" href="reference.html#c.idba_reinit_db" title="idba_reinit_db"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_reinit_db()</span></code></a>:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! Start the work with a clean database</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_reinit_db</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;repinfo.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="reference.html#c.idba_reinit_db" title="idba_reinit_db"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_reinit_db()</span></code></a> clears the database if it exists, then recreates all the
needed tables.  Finally, it populates the informations about the reports (such
as the available report types, their mnemonics and their priority) using the
data in the file given as argument.</p>
<p>The file is in CSV format, with 6 columns:</p>
<ol class="arabic simple">
<li>Report code (corresponding to parameter <code class="docutils literal notranslate"><span class="pre">rep_cod</span></code>)</li>
<li>Mnemonic name (corresponding to parameter <code class="docutils literal notranslate"><span class="pre">rep_memo</span></code>)</li>
<li>Report description</li>
<li>Report priority (corresponding to parameter <code class="docutils literal notranslate"><span class="pre">priority</span></code>)</li>
<li>Ignored</li>
<li>Ignored</li>
</ol>
<p>If <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> is given instead of the file name, <a class="reference internal" href="reference.html#c.idba_reinit_db" title="idba_reinit_db"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_reinit_db()</span></code></a> will read the
data from <code class="docutils literal notranslate"><span class="pre">/etc/repinfo.csv</span></code>.</p>
<p>This is an example of the contents of the file:</p>
<div class="highlight-csv notranslate"><div class="highlight"><pre><span></span>01,synop,report synottico,100,oss,0
02,metar,metar,80,oss,0
03,temp,radiosondaggio,100,oss,2
04,ana_lm,valori analizzati LM,-1,ana,255
05,ana,analisi,-10,pre,255
06,pre_cleps_box1.5maxel001,previsti cosmo leps box 1.5 gradi valore max elemento 1,-1,pre,255
07,pre_lmn_box1.5med,previzione Lokal Model nudging box 1.5 gradi valore medio,-1,pre,255
08,pre_lmp_spnp0,previsione Lkal Model prognostica interpolato punto piu&#39; vicino,-1,pre,255
09,boe,dati omdametrici,100,oss,31
</pre></div>
</div>
<p><a class="reference internal" href="reference.html#c.idba_reinit_db" title="idba_reinit_db"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_reinit_db()</span></code></a> will not work unless <code class="docutils literal notranslate"><span class="pre">rewrite</span></code> has been enabled for the
data when opening the database.</p>
</div>
<div class="section" id="inserting-data">
<h2>Inserting data<a class="headerlink" href="#inserting-data" title="Permalink to this headline">¶</a></h2>
<p>Data is inserted using <a class="reference internal" href="reference.html#c.idba_insert_data" title="idba_insert_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_insert_data()</span></code></a>:</p>
<blockquote>
<div>! Insert a new data in the database
ierr = idba_setr(handle, “ana_id”, 4)
ierr = idba_setr(handle, “rep_memo”, “synop”)
ierr = idba_setd(handle, “lat”, 44.500D0)
ierr = idba_setd(handle, “lon”, 11.328D0)
ierr = idba_setr(handle, “year”, 2005)
ierr = idba_setr(handle, “month”, 7)
ierr = idba_setr(handle, “day”, 26)
…
ierr = idba_setr(handle, “B11002”, 1.8)
ierr = idba_insert_data(handle)</div></blockquote>
<p>This code introduces a new function:</p>
<ul>
<li><p class="first"><a class="reference internal" href="reference.html#c.idba_insert_data" title="idba_insert_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_insert_data()</span></code></a>:
inserts a new value in the database.  All the information about the parameter
to insert is taken from the input previously set by <code class="docutils literal notranslate"><span class="pre">idba_set*</span></code> functions.</p>
<p>When data of the same kind and with the same characteristics already exists,
the behaviour of <a class="reference internal" href="reference.html#c.idba_insert_data" title="idba_insert_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_insert_data()</span></code></a> is defined by the parameter passed to
<a class="reference internal" href="reference.html#c.idba_begin" title="idba_begin"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_begin()</span></code></a> when creating the handle.  See <a class="reference internal" href="#starting-the-work"><span class="std std-ref">Starting the work</span></a> for more informations.</p>
</li>
</ul>
<p><a class="reference internal" href="reference.html#c.idba_insert_data" title="idba_insert_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_insert_data()</span></code></a> will work in different ways according to the data opening
mode of the database:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">read</span></code>: causes an error, because the data cannot be read.</li>
<li><code class="docutils literal notranslate"><span class="pre">add</span></code>: new data can be inserted, but causes an error when trying to insert a
value that already exists.</li>
<li><code class="docutils literal notranslate"><span class="pre">rewrite</span></code>: new data can be inserted, and existing data is overwritten.</li>
</ul>
<p>Also, behaviour changes according to the station values opening mode:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&quot;reuse&quot;</span></code>: when inserting data, if an existing pseudoana record for the data
is found, it will be reused.</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;rewrite&quot;</span></code>: when inserting data, if an existing pseudoana record for the
data is found, it will be completely overwritten with the parameters in
input.</li>
</ul>
<p>Note that the database cannot be opened in pseudoana <code class="docutils literal notranslate"><span class="pre">read</span></code> mode when data
is <code class="docutils literal notranslate"><span class="pre">add</span></code> or <code class="docutils literal notranslate"><span class="pre">rewrite</span></code>.</p>
</div>
<div class="section" id="deleting-data">
<h2>Deleting data<a class="headerlink" href="#deleting-data" title="Permalink to this headline">¶</a></h2>
<p>Data is deleted using <a class="reference internal" href="reference.html#c.idba_remove_data" title="idba_remove_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_remove_data()</span></code></a>:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! Delete all data from the station with id 4 in year 2002</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;ana_id&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="mi">2002</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_remove_data</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
</pre></div>
</div>
<p>This code introduces a new function:</p>
<ul class="simple">
<li><a class="reference internal" href="reference.html#c.idba_remove_data" title="idba_remove_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_remove_data()</span></code></a>: deletes all the data found in the extremes specified in input.</li>
</ul>
<p><a class="reference internal" href="reference.html#c.idba_remove_data" title="idba_remove_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_remove_data()</span></code></a> will not work unless <code class="docutils literal notranslate"><span class="pre">rewrite</span></code> has been enabled for
the data when opening the database.</p>
</div>
<div class="section" id="reading-attributes">
<h2>Reading attributes<a class="headerlink" href="#reading-attributes" title="Permalink to this headline">¶</a></h2>
<p>Attributes are read using <a class="reference internal" href="reference.html#c.idba_next_attribute" title="idba_next_attribute"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_next_attribute()</span></code></a>:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! ...setup a query...</span>
<span class="n">idba_query_data</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="nb">count</span><span class="p">)</span>
<span class="k">do while</span> <span class="p">(</span><span class="nb">count</span><span class="p">.</span><span class="n">gt</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_next_data</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">param</span><span class="p">)</span>

  <span class="c">! Read QC informations about the last value read</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_query_attributes</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">qc_count</span><span class="p">)</span>
  <span class="k">do while</span> <span class="p">(</span><span class="n">qc_count</span><span class="p">.</span><span class="n">gt</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>
      <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_next_attribute</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">param</span><span class="p">)</span>
      <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_enqc</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="k">value</span><span class="p">)</span>
      <span class="c">! ...process the value...</span>
      <span class="n">qc_count</span> <span class="o">=</span> <span class="n">qc_count</span> <span class="o">-</span> <span class="mi">1</span>
  <span class="n">enddo</span>

  <span class="nb">count</span> <span class="o">=</span> <span class="nb">count</span> <span class="o">-</span> <span class="mi">1</span>
<span class="n">enddo</span>
</pre></div>
</div>
<p>This code introduces two new functions:</p>
<ul>
<li><p class="first"><a class="reference internal" href="reference.html#c.idba_query_attributes" title="idba_query_attributes"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_query_attributes()</span></code></a>:
Performs a query to retrieve attributes for the last variable read by
<a class="reference internal" href="reference.html#c.idba_next_data" title="idba_next_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_next_data()</span></code></a>.  It returns the number of attributes available.</p>
</li>
<li><p class="first"><a class="reference internal" href="reference.html#c.idba_next_attribute" title="idba_next_attribute"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_next_attribute()</span></code></a>:
Retrieves one by one the values queried by <a class="reference internal" href="reference.html#c.idba_query_attributes" title="idba_query_attributes"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_query_attributes()</span></code></a> if
there are no more items available, the function will fail.</p>
<p>The parameter <code class="docutils literal notranslate"><span class="pre">param</span></code> will be set to the name (in the form <code class="docutils literal notranslate"><span class="pre">*Bxxyyy</span></code>) of
the attribute just read.</p>
</li>
</ul>
<p>It is possible to read attributes at a later time giving a context ID and a B
table value:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! Read the context ID after a insert_data or a next_data</span>
<span class="n">idba_enqi</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;context_id&quot;</span><span class="p">,</span> <span class="n">id</span><span class="p">)</span>

<span class="c">! ...a while later...</span>

<span class="c">! Query the attributes of the variable with the given</span>
<span class="c">! context ID and B table value</span>
<span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;*context_id&quot;</span><span class="p">,</span> <span class="n">id</span><span class="p">)</span>
<span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;*var_related&quot;</span><span class="p">,</span> <span class="s2">&quot;B12001&quot;</span><span class="p">)</span>

<span class="c">! These are ways one could choose specific attributes:</span>
<span class="c">! one attribute: idba_setc(handle, &quot;*var&quot;, &quot;B33007&quot;)</span>
<span class="c">! some attributes: idba_setc(handle, &quot;*varlist&quot;, &quot;B33007,B33036&quot;)</span>
<span class="c">! by default, all attributes are returned</span>

<span class="c">! Read QC informations about the last value read</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_query_attributes</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">qc_count</span><span class="p">)</span>
<span class="k">do while</span> <span class="p">(</span><span class="n">qc_count</span><span class="p">.</span><span class="n">gt</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_next_attribute</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">param</span><span class="p">)</span>
    <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_enqc</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="k">value</span><span class="p">)</span>
    <span class="c">! ...process the value...</span>
    <span class="n">qc_count</span> <span class="o">=</span> <span class="n">qc_count</span> <span class="o">-</span> <span class="mi">1</span>
<span class="n">enddo</span>
</pre></div>
</div>
</div>
<div class="section" id="writing-attributes">
<h2>Writing attributes<a class="headerlink" href="#writing-attributes" title="Permalink to this headline">¶</a></h2>
<p>Attributes are written using <a class="reference internal" href="reference.html#c.idba_insert_attributes" title="idba_insert_attributes"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_insert_attributes()</span></code></a>, which can be used after an
<a class="reference internal" href="reference.html#c.idba_next_data" title="idba_next_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_next_data()</span></code></a>, after an <a class="reference internal" href="reference.html#c.idba_insert_data" title="idba_insert_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_insert_data()</span></code></a> or at any time using a stored data
id.  These three case differ on how to communicate to <a class="reference internal" href="reference.html#c.idba_insert_attributes" title="idba_insert_attributes"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_insert_attributes()</span></code></a> what is
the data about which to write attributes.</p>
<p>When used after <a class="reference internal" href="reference.html#c.idba_next_data" title="idba_next_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_next_data()</span></code></a>, <a class="reference internal" href="reference.html#c.idba_insert_attributes" title="idba_insert_attributes"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_insert_attributes()</span></code></a> can refer directly to the
last data retrieved:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! ...setup a query...</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_query_data</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="nb">count</span><span class="p">)</span>
<span class="k">do while</span> <span class="p">(</span><span class="nb">count</span><span class="p">.</span><span class="n">gt</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_next_data</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">param</span><span class="p">)</span>
  <span class="c">! ...process data...</span>

  <span class="c">! Set the attributes</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;*B33007&quot;</span><span class="p">,</span> <span class="mi">75</span><span class="p">)</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;*B33006&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_insert_attributes</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>

  <span class="nb">count</span> <span class="o">=</span> <span class="nb">count</span> <span class="o">-</span> <span class="mi">1</span>
<span class="n">enddo</span>
</pre></div>
</div>
<p>After an <a class="reference internal" href="reference.html#c.idba_insert_data" title="idba_insert_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_insert_data()</span></code></a> instead, since <a class="reference internal" href="reference.html#c.idba_insert_data" title="idba_insert_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_insert_data()</span></code></a> can write more than
one data at a time, we need to tell <a class="reference internal" href="reference.html#c.idba_insert_attributes" title="idba_insert_attributes"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_insert_attributes()</span></code></a> which of them we are
referring to:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! Insert wind speed and temperature</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setr</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;B11002&quot;</span><span class="p">,</span> <span class="mf">1.8</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setr</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;B12001&quot;</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_insert_data</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>

<span class="c">! Set the attributes</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;*B33007&quot;</span><span class="p">,</span> <span class="mi">75</span><span class="p">)</span>

<span class="c">! Use &quot;*var_related&quot; to indicate which of the two variables we are annotating</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setc</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;*var_related&quot;</span><span class="p">,</span> <span class="s2">&quot;B11002&quot;</span><span class="p">)</span>

<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_insert_attributes</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="reference.html#c.idba_insert_attributes" title="idba_insert_attributes"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_insert_attributes()</span></code></a> can also be called at any time using a previously stored data it:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! ...perform a query with idba_query_data...</span>
<span class="k">do while</span> <span class="p">(</span><span class="nb">count</span><span class="p">.</span><span class="n">gt</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_next_data</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">param</span><span class="p">)</span>
  <span class="c">! ...process data...</span>

  <span class="c">! This variable is interesting: save the context ID</span>
  <span class="c">! to refer to it later</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_enqi</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;context_id&quot;</span><span class="p">,</span> <span class="n">saved_id</span><span class="p">)</span>

  <span class="nb">count</span> <span class="o">=</span> <span class="nb">count</span> <span class="o">-</span> <span class="mi">1</span>
<span class="n">enddo</span>

<span class="c">! ...some time later...</span>

<span class="c">! Insert attributes about that interesting variable</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;*B33007&quot;</span><span class="p">,</span> <span class="mi">75</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;*B33006&quot;</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>

<span class="c">! Select the variable using its context id</span>
<span class="c">! and variable code</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;*context_id&quot;</span><span class="p">,</span> <span class="n">saved_id</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;*var_related&quot;</span><span class="p">,</span> <span class="s2">&quot;B11001&quot;</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_insert_attributes</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
</pre></div>
</div>
<p>This code introduces a new function:</p>
<ul>
<li><p class="first"><a class="reference internal" href="reference.html#c.idba_insert_attributes" title="idba_insert_attributes"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_insert_attributes()</span></code></a>
Set one or more attributes about a variable.</p>
<p>The variable can be identified directly by using <code class="docutils literal notranslate"><span class="pre">idba_seti(handle,</span> <span class="pre">&quot;*context_id&quot;,</span> <span class="pre">id)</span></code> and <code class="docutils literal notranslate"><span class="pre">idba_seti(handle,</span> <span class="pre">&quot;*var_related&quot;,</span> <span class="pre">name)</span></code>.
These parameters are automatically set by the <a class="reference internal" href="reference.html#c.idba_next_data" title="idba_next_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_next_data()</span></code></a> and
<a class="reference internal" href="reference.html#c.idba_insert_data" title="idba_insert_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_insert_data()</span></code></a> action routines.</p>
<p>The attributes and values are set as input to <a class="reference internal" href="reference.html#c.idba_insert_attributes" title="idba_insert_attributes"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_insert_attributes()</span></code></a> using the
<cite>idba_set*</cite> functions with an asterisk in front of the variable name.</p>
</li>
</ul>
<p><a class="reference internal" href="reference.html#c.idba_insert_attributes" title="idba_insert_attributes"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_insert_attributes()</span></code></a> will work in different ways according to the attributes
opening mode of the database:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">&quot;read&quot;</span></code>: attributes cannot be modified in any way.</li>
<li><code class="docutils literal notranslate"><span class="pre">&quot;rewrite&quot;</span></code>: attributes can be added, and existing attributes can be
overwritten.</li>
</ul>
</div>
<div class="section" id="deleting-attributes">
<h2>Deleting attributes<a class="headerlink" href="#deleting-attributes" title="Permalink to this headline">¶</a></h2>
<p>Attributes are deleted using <a class="reference internal" href="reference.html#c.idba_remove_attributes" title="idba_remove_attributes"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_remove_attributes()</span></code></a>:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! Delete the confidence interval from the wind speed</span>

<span class="c">! The referring variable is identified in the same way as with</span>
<span class="c">! idba_insert_attributes:</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;*context_id&quot;</span><span class="p">,</span> <span class="n">saved_id</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;*var_related&quot;</span><span class="p">,</span> <span class="s2">&quot;B11002&quot;</span><span class="p">)</span>

<span class="c">! The attributes to delete are selected by setting &quot;*varlist&quot;:</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setc</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;*varlist&quot;</span><span class="p">,</span> <span class="s2">&quot;*B33007&quot;</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_remove_attributes</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
</pre></div>
</div>
<p>This code introduces a new function:</p>
<ul class="simple">
<li><a class="reference internal" href="reference.html#c.idba_remove_attributes" title="idba_remove_attributes"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_remove_attributes()</span></code></a>:
Delete attributes from a variable identified in the same way as with</li>
</ul>
<p><a class="reference internal" href="reference.html#c.idba_remove_attributes" title="idba_remove_attributes"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_remove_attributes()</span></code></a> will not work unless the database has been opened in
attribute <cite>rewrite</cite> mode.</p>
</div>
<div class="section" id="ending-the-work">
<h2>Ending the work<a class="headerlink" href="#ending-the-work" title="Permalink to this headline">¶</a></h2>
<p>When you are finished working with a handle, you release it with
<a class="reference internal" href="reference.html#c.idba_commit" title="idba_commit"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_commit()</span></code></a>:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! We are finished with this handle</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_commit</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
</pre></div>
</div>
<p>When you are finished working with DB-ALLe, you use <a class="reference internal" href="reference.html#c.idba_disconnect" title="idba_disconnect"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_disconnect()</span></code></a> to
close all connections and release all resources:</p>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! We do not need to work with dballe anymore</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_disconnect</span><span class="p">(</span><span class="n">dbh</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="shortcuts-to-stations-and-data">
<h2>Shortcuts to stations and data<a class="headerlink" href="#shortcuts-to-stations-and-data" title="Permalink to this headline">¶</a></h2>
<p>DB-All.e offers two shortcuts to represent pseudoana entries and data in the
database: the <code class="docutils literal notranslate"><span class="pre">ana_id</span></code> and the <code class="docutils literal notranslate"><span class="pre">data_id</span></code> keys, that are set in the
output of every <a class="reference internal" href="reference.html#c.idba_next_data" title="idba_next_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_next_data()</span></code></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">ana_id</span></code> represents a pseudoana entry.  Every time one needs to specify a
set of latitude, longitude, fixed/mobile, one could use the corresponding
<code class="docutils literal notranslate"><span class="pre">ana_id</span></code> value, if known, and get a faster search.</p>
<p><code class="docutils literal notranslate"><span class="pre">data_id</span></code> represents a data entry.  Every time one needs to identify some
data setting latitude, longitude, level layer, time range and so on, one can
just provide the value of <code class="docutils literal notranslate"><span class="pre">data_id</span></code>, and also get a faster search.</p>
</div>
<div class="section" id="helpers-for-pretty-printing">
<h2>Helpers for pretty printing<a class="headerlink" href="#helpers-for-pretty-printing" title="Permalink to this headline">¶</a></h2>
<p>There are a number of functions in DB-All.e, the <code class="docutils literal notranslate"><span class="pre">idba_spiega\*</span></code> group of
functions, that are not needed for normal processing but can be useful to
improve the presentation of data to users.</p>
<p>All these function take a number of parameters and a string, and they store a
proper description of the values into the string.</p>
<p>The functions are:</p>
<ul class="simple">
<li><a class="reference internal" href="reference.html#c.idba_describe_level" title="idba_describe_level"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_describe_level()</span></code></a>:
Describes a level.  For example, <code class="docutils literal notranslate"><span class="pre">idba_describe_level(handle,106,10,106,20,string)</span></code>
will store in <code class="docutils literal notranslate"><span class="pre">string</span></code> something like: <em>“Layer between 10hm and
20hm above ground”</em>.</li>
<li><a class="reference internal" href="reference.html#c.idba_describe_timerange" title="idba_describe_timerange"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_describe_timerange()</span></code></a>:
Describes a time range.  For example, <code class="docutils literal notranslate"><span class="pre">idba_describe_timerange(handle,3,0,600,string)</span></code>
will store in <code class="docutils literal notranslate"><span class="pre">string</span></code> something like: <em>“Average between reference
time+0s to reference time+600s”</em>.</li>
<li><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_describe_var(handle,varcode,value,string)()</span></code>:
Describe a value.  For example, <code class="docutils literal notranslate"><span class="pre">idba_describe_var(handle,&quot;B12001&quot;,&quot;280&quot;,string)</span></code>
will store in <code class="docutils literal notranslate"><span class="pre">string</span></code> something like: <em>“280 (K) TEMPERATURE/DRY-BULB
TEMPERATURE”</em>.</li>
</ul>
</div>
<div class="section" id="modifiers-for-queries">
<h2>Modifiers for queries<a class="headerlink" href="#modifiers-for-queries" title="Permalink to this headline">¶</a></h2>
<p>DB-All.e allows to set special query behaviours using the <code class="docutils literal notranslate"><span class="pre">&quot;query&quot;</span></code>
parameter.  The available options are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">best</span></code>: When measures from different kinds of reports exist in the same
physical space, do not return them all, but only return the one of the record
type with the highest priority.</li>
</ul>
</div>
<div class="section" id="working-with-files">
<span id="id2"></span><h2>Working with files<a class="headerlink" href="#working-with-files" title="Permalink to this headline">¶</a></h2>
<p>This is a list of the differences between working with files and working with
databases:</p>
<ul>
<li><p class="first">You do not need to call <a class="reference internal" href="reference.html#c.idba_connect" title="idba_connect"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_connect()</span></code></a> and <a class="reference internal" href="reference.html#c.idba_disconnect" title="idba_disconnect"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_disconnect()</span></code></a>: the work
session starts at <a class="reference internal" href="reference.html#c.idba_begin_messages" title="idba_begin_messages"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_begin_messages()</span></code></a> and ends at <a class="reference internal" href="reference.html#c.idba_commit" title="idba_commit"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_commit()</span></code></a></p>
</li>
<li><p class="first">When reading, performing <a class="reference internal" href="reference.html#c.idba_query_stations" title="idba_query_stations"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_query_stations()</span></code></a> or <a class="reference internal" href="reference.html#c.idba_query_data" title="idba_query_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_query_data()</span></code></a> a second
time advances to the next message in the file.</p>
</li>
<li><p class="first">Query parameters set before an <a class="reference internal" href="reference.html#c.idba_query_data" title="idba_query_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_query_data()</span></code></a> have no effect: filtering
data is not implemented for files. Since it may be implemented in the future,
it is suggested to avoid setting query parameters before an
<a class="reference internal" href="reference.html#c.idba_query_data" title="idba_query_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_query_data()</span></code></a> to avoid unexpected changes of behaviour with future
versions of DB-All.e.</p>
</li>
<li><p class="first">When reading, you will see that there are no more messages because
<a class="reference internal" href="reference.html#c.idba_query_stations" title="idba_query_stations"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_query_stations()</span></code></a> or <a class="reference internal" href="reference.html#c.idba_query_data" title="idba_query_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_query_data()</span></code></a> will return 0.</p>
</li>
<li><p class="first">When writing, you can use the <cite>query</cite> input parameter to <a class="reference internal" href="reference.html#c.idba_insert_data" title="idba_insert_data"><code class="xref c c-func docutils literal notranslate"><span class="pre">idba_insert_data()</span></code></a> to
control when a new message is started.  If you set it to <cite>subset</cite>, then the
data will be inserted in a new BUFR or CREX subset.  If you set it to
<cite>message</cite>, you will start a new message.</p>
<p>After <cite>“message”</cite> you can specify a template for the message, using one of
the names listed by <cite>dbadb export -t list</cite>, for example: <cite>“message generic”</cite>.
If you do not specify a template name, an appropriate template will
automatically be chosen for you.</p>
</li>
<li><p class="first">Setting <cite>rep_memo</cite> you can influence the output template of messages: if you
set it to a synop report code, you will create a synop message.</p>
</li>
</ul>
</div>
<div class="section" id="code-examples">
<h2>Code examples<a class="headerlink" href="#code-examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="insert-station-data-then-insert-data">
<h3>Insert station data, then insert data<a class="headerlink" href="#insert-station-data-then-insert-data" title="Permalink to this headline">¶</a></h3>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_begin</span><span class="p">(</span><span class="n">dbhandle</span><span class="p">,</span> <span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;write&quot;</span><span class="p">,</span> <span class="s2">&quot;add&quot;</span><span class="p">,</span> <span class="s2">&quot;write&quot;</span><span class="p">)</span>

<span class="c">! Insert data about a station</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setr</span> <span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;lat&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="mf">1.345</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setr</span> <span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;lon&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="mf">4.678</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setr</span> <span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="mi">23</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_insert_data</span> <span class="p">(</span><span class="n">handle</span><span class="p">)</span>

<span class="c">! Read the station ID for the station we just inserted</span>
<span class="c">! Use *ana_id instead of ana_id after an idba_insert_data</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_enqi</span> <span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;*ana_id&quot;</span><span class="p">,</span> <span class="n">anaid</span><span class="p">)</span>

<span class="c">! Reset the input data</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_unsetall</span> <span class="p">(</span><span class="n">handle</span><span class="p">)</span>

<span class="c">! Add data to the station we just inserted</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span> <span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;ana_id&quot;</span><span class="p">,</span> <span class="n">anaid</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setlevel</span> <span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_settimerange</span> <span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setdate</span> <span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="mi">2006</span><span class="p">,</span> <span class="mi">06</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span> <span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;t&quot;</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setc</span> <span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;B12345&quot;</span><span class="p">,</span> <span class="s2">&quot;ciao&quot;</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_insert_data</span> <span class="p">(</span><span class="n">handle</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="query-data-then-query-station-data">
<h3>Query data, then query station data<a class="headerlink" href="#query-data-then-query-station-data" title="Permalink to this headline">¶</a></h3>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_begin</span><span class="p">(</span><span class="n">dbhandle</span><span class="p">,</span> <span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span><span class="p">)</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_begin</span><span class="p">(</span><span class="n">dbhandle</span><span class="p">,</span> <span class="n">handleana</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span><span class="p">)</span>

<span class="c">! Prepare a query</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setd</span> <span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;latmin&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="p">...</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_setd</span> <span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;lonmax&quot;</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>

<span class="c">! Make the query</span>
<span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_query_data</span> <span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">N</span><span class="p">)</span>

<span class="c">! Iterate the results</span>
<span class="k">do </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">N</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_next_data</span> <span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">varname</span><span class="p">)</span>

  <span class="c">! Read data about the variable we just had</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_enqlevel</span> <span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">ltype</span><span class="p">,</span> <span class="n">l1</span><span class="p">,</span> <span class="n">l2</span><span class="p">)</span>

  <span class="c">! Read pseudoana data about the variable we just had</span>
  <span class="c">! Setup a query for the station with &#39;query_stations&#39;</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_enqi</span> <span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="s2">&quot;ana_id&quot;</span><span class="p">,</span> <span class="n">anaid</span><span class="p">)</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_seti</span> <span class="p">(</span><span class="n">handleana</span><span class="p">,</span> <span class="s2">&quot;ana_id&quot;</span><span class="p">,</span> <span class="n">anaid</span><span class="p">)</span>

  <span class="c">! Query.  Nstaz should always be 1 because we query a specific station</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_query_stations</span> <span class="p">(</span><span class="n">handleana</span><span class="p">,</span> <span class="n">Nstaz</span><span class="p">)</span>

  <span class="c">! Fetch the data</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_next_station</span> <span class="p">(</span><span class="n">handleana</span><span class="p">)</span>

  <span class="c">! Read the data about the station</span>
  <span class="c">! All the data inserted with set_station_context is available here</span>
  <span class="n">ierr</span> <span class="o">=</span> <span class="n">idba_enqi</span> <span class="p">(</span><span class="n">handleana</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
<span class="n">enddo</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">dballe</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../parms.html">Input/output/query parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../btable.html">Local B table codes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ltypes.html">Level type values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tranges.html">Time range values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aliases.html">Varcode aliases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../env.html">DB-All.e environment variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connect.html">Connecting to DB-All.e</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/dballe.html">Python dballe package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/dballe.volnd.html">Python dballe.volnd package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp/dballe.html">C++ dballe namespace</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="dballe.html">Fortran dballe functions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="concepts.html">Fortran API concepts</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">A walk through the Fortran API</a></li>
<li class="toctree-l2"><a class="reference internal" href="transactions.html">Transactional behaviour</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference.html">Fortran dballe functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html">FAQ and Troubleshooting</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="dballe.html">Fortran dballe functions</a><ul>
      <li>Previous: <a href="concepts.html" title="previous chapter">Fortran API concepts</a></li>
      <li>Next: <a href="transactions.html" title="next chapter">Transactional behaviour</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Enrico Zini.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
      |
      <a href="../_sources/fortran/walkthrough.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>